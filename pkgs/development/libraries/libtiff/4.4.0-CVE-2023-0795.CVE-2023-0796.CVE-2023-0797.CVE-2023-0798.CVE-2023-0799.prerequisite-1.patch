Based on upstream d63de61b1ec3385f6383ef9a1f453e4b8b11d536, adjusted for
formatting differences in 4.4.0

diff --git a/libtiff/tif_close.c b/libtiff/tif_close.c
index 04977bc7..b6c9c97a 100644
--- a/libtiff/tif_close.c
+++ b/libtiff/tif_close.c
@@ -125,11 +125,14 @@ TIFFCleanup(TIFF* tif)
 void
 TIFFClose(TIFF* tif)
 {
+    if (tif != NULL)
+    {
 	TIFFCloseProc closeproc = tif->tif_closeproc;
 	thandle_t fd = tif->tif_clientdata;
 
 	TIFFCleanup(tif);
-	(void) (*closeproc)(fd);
+        (void)(*closeproc)(fd);
+    }
 }
 
 /* vim: set ts=8 sts=8 sw=8 noet: */
diff --git a/tools/tiffcrop.c b/tools/tiffcrop.c
index 0d61a95e..3ad044a4 100644
--- a/tools/tiffcrop.c
+++ b/tools/tiffcrop.c
@@ -2554,7 +2554,10 @@ main(int argc, char* argv[])
       }
     }
 
+    if (out != NULL)
+    {
   TIFFClose(out);
+    }
 
   return (0);
   } /* end main */
